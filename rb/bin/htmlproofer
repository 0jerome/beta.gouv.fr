#!/usr/bin/env ruby

require 'rubygems'
require 'bundler'
Bundler.setup :test

require 'html-proofer'

dir  = ARGV[0] || '.'
args = ARGV[1] ? ARGV[1..-1] : []

opts = args.each_with_object({}) do |option, opts|
  option_name       = option.to_s[2..-1].gsub('-', '_').to_sym
  opts[option_name] = true
end

HTMLProofer
  .check_directory("#{Dir.pwd}/#{dir}", opts)
  .run
